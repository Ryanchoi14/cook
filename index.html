<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>CSS 쿠키클리커 게임</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  body {
    font-family: 'Press Start 2P', cursive;
    background: #f0e4d7;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }

  /* 닉네임 입력 화면 */
  #nicknameInputDiv {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #fff4e0;
    padding: 40px 60px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    text-align: center;
  }

  #nicknameInputDiv label {
    font-size: 20px;
    margin-bottom: 15px;
  }

  #nicknameInput {
    width: 300px;
    height: 50px;
    font-size: 24px;
    text-align: center;
    padding: 0 15px;
    border-radius: 10px;
    border: 2px solid #caa472;
    outline: none;
    background-color: #fff8e0;
    transition: all 0.2s ease;
  }

  #nicknameInput:focus {
    border-color: #ff7f50;
    box-shadow: 0 0 10px rgba(255,127,80,0.5);
  }

  #startButton {
    margin-top: 25px;
    padding: 15px 40px;
    font-size: 22px;
    border-radius: 10px;
    border: none;
    background-color: #d2691e;
    color: white;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  #startButton:hover {
    background-color: #ff7f50;
    transform: scale(1.05);
  }

  /* 게임 화면 */
  #gameDiv {
    display: none;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  #playerName {
    font-size: 24px;
    margin-bottom: 10px;
  }

  #score {
    font-size: 28px;
    margin: 10px 0 20px 0;
    position: relative;
  }

  .score-float {
    position: absolute;
    font-size: 20px;
    color: #ff4500;
    animation: floatUp 1s ease-out forwards;
  }

  @keyframes floatUp {
    0% { opacity: 1; transform: translateY(0); }
    100% { opacity: 0; transform: translateY(-40px); }
  }

  /* CSS 쿠키 */
  #cookie {
    width: 160px;
    height: 160px;
    background: radial-gradient(circle at 30% 30%, #f2d16b, #d2691e);
    border-radius: 50%;
    box-shadow: inset -5px -5px 15px #c8944f, inset 5px 5px 10px #e3c078,
                3px 3px 15px rgba(0,0,0,0.3);
    position: relative;
    cursor: pointer;
    transition: transform 0.1s;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 20px;
  }

  #cookie:active {
    transform: scale(0.92);
  }

  .chip {
    width: 20px;
    height: 20px;
    background: radial-gradient(circle at 30% 30%, #3e1f0d, #5a2b14);
    border-radius: 50%;
    position: absolute;
  }

  .chip:nth-child(1) { top: 30px; left: 40px; }
  .chip:nth-child(2) { top: 80px; left: 60px; }
  .chip:nth-child(3) { top: 50px; left: 100px; }
  .chip:nth-child(4) { top: 90px; left: 110px; }

  #shopButton {
    margin-top: 20px;
    padding: 12px 25px;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
  }

  #shopModal {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #fff4e0;
    border: 2px solid #caa472;
    border-radius: 10px;
    padding: 20px;
    z-index: 1000;
    text-align: center;
    width: 300px;
  }

  #shopModal h2 {
    margin-top: 0;
  }

  .shop-item {
    display: block;
    margin: 10px 0;
    padding: 8px 12px;
    font-size: 16px;
    cursor: pointer;
  }

  #closeShop {
    margin-top: 20px;
    padding: 6px 12px;
    font-size: 16px;
    cursor: pointer;
  }

</style>
</head>
<body>

<!-- 닉네임 입력 화면 -->
<div id="nicknameInputDiv">
  <label for="nicknameInput">Enter your nickname:</label>
  <input type="text" id="nicknameInput" placeholder="Player1">
  <button id="startButton">Start Game</button>
</div>

<!-- 게임 화면 -->
<div id="gameDiv">
  <div id="playerName"></div>
  <div id="score">score: 0</div>

  <div id="cookie">
    <div class="chip"></div>
    <div class="chip"></div>
    <div class="chip"></div>
    <div class="chip"></div>
  </div>

  <button id="shopButton">Open Shop</button>

  <div id="shopModal">
    <h2>Shop</h2>
    <div id="shop"></div>
    <button id="closeShop">Close</button>
  </div>
</div>

<script>
let score = 0;
let clickPower = 1;
let autoPower = 0;
let playerName = "";

const nicknameInputDiv = document.getElementById('nicknameInputDiv');
const nicknameInput = document.getElementById('nicknameInput');
const startButton = document.getElementById('startButton');
const gameDiv = document.getElementById('gameDiv');

const cookie = document.getElementById('cookie');
const scoreDisplay = document.getElementById('score');
const playerNameDisplay = document.getElementById('playerName');
const shopButton = document.getElementById('shopButton');
const shopModal = document.getElementById('shopModal');
const closeShop = document.getElementById('closeShop');
const shop = document.getElementById('shop');

// 게임 시작
startButton.addEventListener('click', () => {
  playerName = nicknameInput.value || "Player1";
  playerNameDisplay.innerText = playerName;
  nicknameInputDiv.style.display = "none";
  gameDiv.style.display = "flex";
});

// 클릭 점수 증가 및 애니메이션
cookie.addEventListener('click', () => {
    score += clickPower;
    updateScore();
    createScoreFloat(clickPower);
});

function createScoreFloat(amount) {
    const floatText = document.createElement('div');
    floatText.classList.add('score-float');
    floatText.innerText = `+${amount}`;
    scoreDisplay.appendChild(floatText);
    setTimeout(() => { floatText.remove(); }, 1000);
}

// 상점 아이템
let items = [
    { name: 'Click Upgrade', cost: 10, type: 'click', power: 1, level: 0 },
    { name: 'Auto Cookie', cost: 20, type: 'auto', power: 1, level: 0 }
];

function updateShop() {
    shop.innerHTML = '';
    items.forEach((item, index) => {
        const btn = document.createElement('button');
        btn.innerText = `${item.name} (Cost: ${item.cost}, Level: ${item.level})`;
        btn.classList.add('shop-item');
        btn.disabled = score < item.cost;
        btn.onclick = () => buyItem(index);
        shop.appendChild(btn);
    });
}

function buyItem(index) {
    let item = items[index];
    if (score >= item.cost) {
        score -= item.cost;
        item.level++;
        item.cost = Math.floor(item.cost * 1.5);
        if(item.type === 'click') clickPower = Math.pow(2, item.level-1);
        if(item.type === 'auto') autoPower = Math.pow(2, item.level-1);
        updateScore();
        updateShop();
    }
}

function updateScore() {
    scoreDisplay.innerText = `score: ${score}`;
}

// 자동 점수 증가
setInterval(() => {
    if(autoPower > 0){
        score += autoPower;
        updateScore();
        createScoreFloat(autoPower);
    }
}, 1000);

// 상점 열기/닫기
shopButton.addEventListener('click', () => {
    shopModal.style.display = 'block';
    updateShop();
});
closeShop.addEventListener('click', () => {
    shopModal.style.display = 'none';
});
</script>
</body>
</html>
